import{A as f}from"./tenant.service-713d1294.js";import{B as b}from"./vue-datepicker-427a043a.js";import{h as u}from"./moment-fbc5633a.js";import{_ as D,C as y,p as k,i as w,j as B,B as V,k as M,L as Y,l as x,r as g,o as d,c as i,a as e,F as C,m as I,q as p,b as N,t as h,d as S}from"./index-a94dd109.js";y.register(k,w,B,V,M,Y);const T={name:"dashboard_index",components:{VueDatePicker:b,Bar:x},data(){return{walletId:parseInt(localStorage.getItem("walletId")),searchDate:"",date:"",options:[],chartKey:0,chartData:{labels:[],datasets:[{label:"Data One",backgroundColor:"#f87979",data:[]}]},chartOptions:{responsive:!0},average:0}},mounted(){this.getWallet(),console.log("ðŸš€ log:chartData.datasets",this.chartData.datasets[0].data),this.search()},methods:{async getWallet(){let t=await f.Wallet.getWallets(),s=[];for(let l in t.data)s.push({id:t.data[l].id,name:t.data[l].title});this.options=s},async search(){let t=null,s=null;if(this.date=="")console.log("ðŸš€ log:empry.date"),t={wallet_id:this.walletId};else{let a=u(this.date[0]).format("YYYY-MM-DD 00:00:00"),n=u(this.date[1]).format("YYYY-MM-DD 00:00:00");t={wallet_id:this.walletId,start_date:a,end_date:n}}const l=await f.Home.Report(t);console.log("ðŸš€ log:res",l),console.log("ðŸš€ log:chartData",this.chartData);let m=0;if(l){let a=new Date(l.data.startDate),n=new Date(l.data.endDate);console.log("ðŸš€ log:date1",a),console.log("ðŸš€ log:date2",n);let _=Math.abs(n.getTime()-a.getTime());s=Math.ceil(_/(1e3*3600*24))+1,console.log("ðŸš€ log:diffDays",s);let r=[],o=[];for(let v in l.data.data){let c=l.data.data[v];r.includes(c.expense_category.name)||r.push(c.expense_category.name),o.push(c.amount),m+=c.amount}this.chartData.labels=r,this.chartData.datasets[0].data=o,this.spendTotal=m,s&&(this.average=this.spendTotal/s),this.balance=l.data.wallet.balance}this.chartKey+=1}}},W={class:"m-05em mx-2 h-107"},F={class:"p-2 border-radius pink"},A={class:"d-flex mb-1"},K=e("div",{class:"col-3"},[e("label",{class:"float-end pr-2"},"Wallet :")],-1),L={class:"col-9"},O={key:0},P={class:"form-control",name:"",id:""},E=["value"],j={class:"d-flex mb-1"},q=e("div",{class:"col-3"},[e("label",{class:"float-end pr-2"},"Date :")],-1),H={class:"col-9"},R={class:"d-flex mt-2 mb-1"},U={class:"col-12"},z={key:0,class:"d-flex mb-1"},G=e("div",{class:"col-3"},[e("label",{class:"float-end pr-2"},"Balance :")],-1),J={class:"col-9"},Q={class:"d-flex mb-1"},X=e("div",{class:"col-3"},[e("label",{class:"float-end pr-2"},"Spend :")],-1),Z={class:"col-9"},$={key:1,class:"d-flex mb-1"},ee=e("div",{class:"col-3"},[e("label",{class:"float-end pr-2"},"Average :")],-1),te={class:"col-9"};function ae(t,s,l,m,a,n){const _=g("VueDatePicker"),r=g("Bar");return d(),i("div",W,[e("div",F,[e("div",A,[K,e("div",L,[a.options.length>0?(d(),i("div",O,[e("select",P,[(d(!0),i(C,null,I(a.options,o=>(d(),i("option",{value:o.id},h(o.name),9,E))),256))])])):p("",!0)])]),e("div",j,[q,e("div",H,[N(_,{modelValue:a.date,"onUpdate:modelValue":s[0]||(s[0]=o=>a.date=o),range:"",type:"date",format:"yyyy-MM-dd"},null,8,["modelValue"])])]),e("div",R,[e("div",U,[e("button",{class:"btn btn-primary w-100",onClick:s[1]||(s[1]=o=>n.search())},"Search")])]),t.balance?(d(),i("div",z,[G,e("div",J,h(t.$filters.formatNumber(t.balance)),1)])):p("",!0),e("div",Q,[X,e("div",Z,h(t.$filters.formatNumber(t.spendTotal)),1)]),a.average?(d(),i("div",$,[ee,e("div",te,h(t.$filters.formatNumber(a.average)),1)])):p("",!0),e("div",null,[(d(),S(r,{key:a.chartKey,id:"my-chart-id",options:a.chartOptions,data:a.chartData},null,8,["options","data"]))])])])}const ne=D(T,[["render",ae]]);export{ne as default};
