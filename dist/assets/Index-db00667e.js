import{_ as p,r,o as c,d as k,$ as _,c as h,F as b,m as T,n as I,a as n,b as d,V as f,t as A,w as g,v}from"./index-a94dd109.js";import{N as L}from"./NumberPad-051a9f68.js";import{A as u}from"./tenant.service-713d1294.js";import{T as C}from"./TransactionList-fc429711.js";import{L as $}from"./Ladda-360f0fa2.js";const V={props:["selfValue"],components:{NumberPad:L},data(){return{keyAmount:"",keyTheme:"btn-keyboard",buttonTheme:"btn-danger"}},methods:{press(e){this.keyAmount=`${this.keyAmount}${e}`},clear(e){e==="all"?this.keyAmount="":this.keyAmount=this.keyAmount.substring(0,this.keyAmount.length-1)}},watch:{keyAmount(){this.$emit("pressed",this.$filters.formatNumber(this.keyAmount))},selfValue(){this.keyAmount=this.selfValue}},created(){}};function E(e,t,m,o,s,a){const i=r("number-pad");return c(),k(i)}const W=p(V,[["render",E]]);const B={name:"IncomeType",data(){return{incomeTypes:[]}},async mounted(){await this.feedData(),this.selectIncomeType(this.incomeTypes[0])},methods:{selectIncomeType(e){this.$parent.incomeCategoryId=e.id,_(".incomeType").removeClass("active"),_(`.${e.title}`).addClass("active")},async feedData(){let e=await u.IncomeCategories.getIncomeCategories();e&&(this.incomeTypes=e.data)}}},N={class:"mt-4 ml-4 mr-4 mb-2 flex"},P=["onClick"];function S(e,t,m,o,s,a){return c(),h("div",N,[(c(!0),h(b,null,T(s.incomeTypes,i=>(c(),h("div",{class:I(["col-4 font-2em text-center incomeType",i.title]),key:i.id,onClick:y=>a.selectIncomeType(i)},[n("i",{class:I(i.icon)},null,2)],10,P))),128))])}const D=p(B,[["render",S]]),M={name:"IncomePage",components:{Keyboard:W,IncomeType:D,TransactionList:C,Ladda:$},data(){return{amount:null,keyAmount:"",incomeCategoryId:"",memo:"",loading:!1,walletId:parseInt(localStorage.getItem("walletId")),indexId:0,wallet:{},walletListId:[]}},mounted(){this.getWallets()},methods:{async saveIncome(){if(this.loading=!0,this.amount=this.keyAmount.replaceAll(",",""),this.incomeCategoryId==null||this.incomeCategoryId=="")alert("PLEASE SELECT INCOME TYPE");else if(this.amount>0&&this.amount!=""){let e={memo:this.memo,income_category_id:this.incomeCategoryId,amount:parseFloat(this.amount),user_id:parseInt(localStorage.getItem("balanceUserId")),wallet_id:this.walletId};await u.Income.add(e),this.keyAmount="",this.memo="",this.loading=!1}this.$refs.transactionList.fetchData()},async getWallets(){let e=await u.Wallet.getWallets();if(e.status==200){this.walletList=e.data;let t=[];this.wallet=e.data.find(o=>o.id==this.walletId),e.data.forEach(function(o){t.push({id:o.id,title:o.title})}),this.walletListId=t;let m=this;this.indexId=this.walletListId.findIndex(o=>o.id==m.walletId)}},async preWallet(){this.indexId-=1,this.wallet=this.walletListId[this.indexId]},async nextWallet(){this.indexId+=1,this.wallet=this.walletListId[this.indexId]}}},F={class:"m-05em mx-2 h-107"},K={class:"p-2 border-radius green"},U={class:"row"},O={class:"col-2"},z={class:"col-8 text-center"},Y={class:"col-2"},j={class:"p-2"},q={class:"row"},G={class:"col-6 pr-0"},H={class:"col-6"},J={class:"row"};function Q(e,t,m,o,s,a){const i=r("IncomeType"),y=r("Keyboard"),w=r("ladda"),x=r("TransactionList");return c(),h("div",F,[n("div",K,[n("div",U,[n("div",O,[d(f,{icon:"mdi-chevron-left-circle",height:"40",variant:"text",width:"40",onClick:t[0]||(t[0]=l=>a.preWallet()),disabled:s.indexId==0},null,8,["disabled"])]),n("div",z,[n("h1",null,A(s.wallet.title),1)]),n("div",Y,[d(f,{icon:"mdi-chevron-right-circle",height:"40",variant:"text",width:"40",onClick:t[1]||(t[1]=l=>a.nextWallet()),disabled:s.indexId==s.walletListId.length-1},null,8,["disabled"])])]),d(i),n("div",j,[n("div",q,[n("div",G,[g(n("input",{type:"text",class:"form-control m-1","onUpdate:modelValue":t[2]||(t[2]=l=>s.keyAmount=l),id:"txtBox",placeholder:"Press any button",readonly:""},null,512),[[v,s.keyAmount]])]),n("div",H,[g(n("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=l=>s.memo=l),class:"form-control m-1",placeholder:"Enter MEMO"},null,512),[[v,s.memo]])])]),d(y,{class:"m-1",onPressed:t[4]||(t[4]=l=>s.keyAmount=l),selfValue:s.keyAmount},null,8,["selfValue"]),d(w,{text:"Save",loading:s.loading,"btn-class":"btn btn-primary w-100",onClick:t[5]||(t[5]=l=>a.saveIncome())},null,8,["loading"])])]),n("div",J,[d(x,{ref:"transactionList"},null,512)])])}const se=p(M,[["render",Q]]);export{se as default};
